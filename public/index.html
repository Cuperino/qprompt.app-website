<!DOCTYPE html>
<html lang="en-us" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>QPrompt Teleprompter</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@700;900&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link href="css/fontawesome.min.css" rel="stylesheet">
    <link href="css/tailwind.css" rel="stylesheet">
    
    <!-- Motion -->
    <script src="https://cdn.jsdelivr.net/npm/motion@10.16.2/dist/motion.js"></script>
    
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #080904;
        }
        ::-webkit-scrollbar-thumb {
            background: #23bb84;
            border-radius: 5px;
        }
        
        /* Preserve essential prompter styles */
        #screen, #qtspinner {
            min-width: 351px;
            min-height: 351px;
            max-width: 1016px;
            max-height: 583px;
            width: 100vw;
            height: calc(100vh - 130px);
        }
        #qprompt-wasm-image { opacity: 0.75; }
        /* Improved hiding for the dynamic prompter container */
        #screen > #qt-shadow-container,
        #screen > [id^="qt-shadow-container"] { 
            opacity: 0 !important; 
            visibility: hidden;
            pointer-events: none;
            transition: opacity 1.5s ease-in-out, visibility 1.5s !important;
        }
        #screen > #qt-shadow-container.show-app,
        #screen > [id^="qt-shadow-container"].show-app {
            opacity: 0.75 !important;
            visibility: visible;
            pointer-events: auto;
        }
        
        /* Hide old tabs initially */
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-brand-dark text-white font-sans overflow-x-hidden antialiased" onload="init()">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 top-0 transition-all duration-300 bg-brand-dark/90 backdrop-blur-md border-b border-white/10" x-data="{ mobileMenu: false }">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0 flex items-center gap-3">
                    <img src="favicon.ico" alt="QPrompt" class="w-10 h-10 animate-pulse">
                    <span class="font-display font-bold text-2xl tracking-tight text-white">QPrompt</span>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="#home" class="hover:text-brand-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">Home</a>
                        <a href="#features" class="hover:text-brand-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">Features</a>
                        <a href="#downloads" class="hover:text-brand-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">Download</a>
                        <a href="#contribute" class="hover:text-brand-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">Contribute</a>
                        <a href="#assistance" class="hover:text-brand-primary transition-colors px-3 py-2 rounded-md text-sm font-medium">Assistance</a>
                        <a href="https://www.patreon.com/qpromptapp" target="_blank" class="bg-white/10 hover:bg-brand-primary hover:text-white transition-all px-4 py-2 rounded-full text-sm font-bold border border-white/20">Dev Blog</a>
                    </div>
                </div>
                
                <!-- Mobile Menu Button -->
                <div class="-mr-2 flex md:hidden">
                    <button @click="mobileMenu = !mobileMenu" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div x-show="mobileMenu" x-transition x-cloak class="md:hidden bg-brand-dark border-b border-white/10">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="#features" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Features</a>
                <a href="#downloads" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Download</a>
                <a href="#contribute" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Contribute</a>
                <a href="#assistance" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Assistance</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="relative min-h-screen flex items-center pt-20 overflow-hidden">
        <!-- Background Elements -->
        <div class="absolute inset-0 z-0">
            <div class="absolute top-20 left-10 w-72 h-72 bg-brand-primary/20 rounded-full blur-[100px] animate-pulse"></div>
            <div class="absolute bottom-20 right-10 w-96 h-96 bg-brand-accent/20 rounded-full blur-[100px] animate-pulse" style="animation-delay: 1s;"></div>
        </div>

        <div class="container mx-auto px-4 relative z-10 grid lg:grid-cols-2 gap-12 items-center h-full">
            <!-- Text Content -->
            <div class="text-center lg:text-left space-y-8" id="hero-text">
                <h1 class="font-display font-black text-6xl md:text-8xl leading-none tracking-tighter">
                    THE ULTIMATE <br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-primary to-brand-accent">TELEPROMPTER</span>
                </h1>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto lg:mx-0 font-light border-l-4 border-brand-primary pl-6">
                    Made for productivity, ease of use & smooth performance. <br>
                    Experience the beast of prompting.
                </p>
                <div class="flex flex-col sm:flex-row gap-6 justify-center lg:justify-start pt-4">
                    <a href="#downloads" class="btn-beast bg-brand-primary border-brand-primary text-white hover:bg-transparent hover:text-brand-primary">
                        Get Started <i class="fas fa-download ml-2"></i>
                    </a>
                    <a href="#features" class="btn-beast border-white/30 text-white hover:border-white hover:bg-white/10">
                        Learn More
                    </a>
                </div>
            </div>

            <!-- Prompter Screen (Logic Preserved) -->
            <div class="relative flex justify-center items-center w-full" id="hero-visual">
                <div class="relative w-full max-w-[800px] aspect-video">
                    <!-- The exact structure required by the logic -->
                    <div id="screen" class="z-0 relative mx-auto" 
                         x-data="heroPrompter({ scale: 0.85, fudgeX: -250, wasmScale: 1, wasmX: 5555, wasmY: 0})"
                         style="margin-top: 6%;">
                        <!-- Video res: 3840x2160 -->
                        <img src="img/video-last-frame.webp" id="last-frame" width="4224" height="2376" 
                             class="origin-top-left hidden" 
                             x-bind:style="wrapperStyle">
                        <video id="top-video" width="4224" height="2376" autoplay muted playsinline 
                               class="origin-top-left" 
                               style="transition: opacity 1.5s ease-in-out; opacity: 0;"
                               x-bind:style="wrapperStyle" 
                               src="video/website-prompter.webm" type="video/webm"></video>
                        <img src="img/qprompt-wasm.webp" id="qprompt-wasm-image" class="hidden lg:block absolute top-0 left-0 w-full opacity-0" 
                             x-bind:style="wasmStyle">
                        <div id="qtstatus"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Scroll Indicator -->
        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce">
            <a href="#features" class="text-white/50 hover:text-white transition-colors">
                <i class="fas fa-chevron-down text-2xl"></i>
            </a>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-24 bg-black/50 relative">
        <div class="container mx-auto px-4">
            <div class="text-center mb-20">
                <h2 class="font-display text-5xl font-bold mb-6">WHY <span class="text-brand-primary">QPROMPT</span>?</h2>
                <div class="w-24 h-1 bg-brand-primary mx-auto"></div>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Feature Cards -->
                <div class="feature-card p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-brand-primary/50 transition-all duration-300 hover:-translate-y-2 group">
                    <i class="fas fa-tachometer-alt text-4xl text-brand-primary mb-6 group-hover:scale-110 transition-transform block"></i>
                    <h3 class="text-xl font-bold mb-4 font-display">High Performance</h3>
                    <p class="text-gray-400">Native support for Linux, Windows, and macOS ensures smooth animations even on low-end hardware.</p>
                </div>
                
                <div class="feature-card p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-brand-primary/50 transition-all duration-300 hover:-translate-y-2 group">
                    <i class="fas fa-eye text-4xl text-brand-accent mb-6 group-hover:scale-110 transition-transform block"></i>
                    <h3 class="text-xl font-bold mb-4 font-display">Transparent Mode</h3>
                    <p class="text-gray-400">Make the background semi-transparent for video calls or overlaying on other apps.</p>
                </div>
                
                <div class="feature-card p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-brand-primary/50 transition-all duration-300 hover:-translate-y-2 group">
                    <i class="fas fa-align-center text-4xl text-brand-primary mb-6 group-hover:scale-110 transition-transform block"></i>
                    <h3 class="text-xl font-bold mb-4 font-display">Eye Contact</h3>
                    <p class="text-gray-400">Adjustable reading area keeps your eyes focused on the camera, not darting left and right.</p>
                </div>

                <div class="feature-card p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-brand-primary/50 transition-all duration-300 hover:-translate-y-2 group">
                    <i class="fas fa-file-alt text-4xl text-brand-accent mb-6 group-hover:scale-110 transition-transform block"></i>
                    <h3 class="text-xl font-bold mb-4 font-display">Rich Text</h3>
                    <p class="text-gray-400">Copy-paste formatted text from popular office suites. Supports LibreOffice formats natively.</p>
                </div>

                <div class="feature-card p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-brand-primary/50 transition-all duration-300 hover:-translate-y-2 group">
                    <i class="fas fa-universal-access text-4xl text-brand-primary mb-6 group-hover:scale-110 transition-transform block"></i>
                    <h3 class="text-xl font-bold mb-4 font-display">Accessibility</h3>
                    <p class="text-gray-400">Includes OpenDyslexic font and reading guides to assist readers with dyslexia.</p>
                </div>
                
                <div class="feature-card p-8 rounded-2xl bg-white/5 border border-white/10 hover:border-brand-primary/50 transition-all duration-300 hover:-translate-y-2 group">
                    <i class="fas fa-keyboard text-4xl text-brand-accent mb-6 group-hover:scale-110 transition-transform block"></i>
                    <h3 class="text-xl font-bold mb-4 font-display">Full Control</h3>
                    <p class="text-gray-400">Customizable shortcuts for keyboards, presentation clickers, and controllers.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Downloads Section (Logic Implemented with Alpine) -->
    <section id="downloads" class="py-24 relative overflow-hidden">
        <!-- Background Decor -->
        <div class="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-brand-primary/5 to-transparent"></div>
        
        <div class="container mx-auto px-4 relative z-10" x-data="{ ver: '2.0', platform: 'all' }">
            <h2 class="font-display text-5xl font-bold text-center mb-12">DOWNLOAD <span class="text-brand-accent">NOW</span></h2>
            
            <div class="flex flex-col md:flex-row justify-center items-center gap-8 mb-16">
                <a href="https://sourceforge.net/projects/qprompt/files/latest/download" 
                   class="btn-beast bg-gradient-to-r from-brand-primary to-brand-accent text-white border-0 hover:shadow-lg hover:shadow-brand-primary/50">
                   <i class="fas fa-download mr-2"></i> Auto-Detect Download
                </a>
            </div>

            <!-- Filters -->
            <div class="bg-white/5 border border-white/10 p-6 rounded-2xl max-w-4xl mx-auto mb-12 backdrop-blur-sm">
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-bold mb-2 text-brand-primary">VERSION</label>
                        <div class="flex flex-wrap gap-2">
                            <button @click="ver = 'ea'" :class="ver === 'ea' ? 'bg-brand-primary text-white' : 'bg-transparent border border-white/20 hover:bg-white/10'" class="px-4 py-2 rounded-lg transition-colors">Early Access</button>
                            <button @click="ver = '2.0'" :class="ver === '2.0' ? 'bg-brand-primary text-white' : 'bg-transparent border border-white/20 hover:bg-white/10'" class="px-4 py-2 rounded-lg transition-colors">2.0</button>
                            <button @click="ver = '1.2'" :class="ver === '1.2' ? 'bg-brand-primary text-white' : 'bg-transparent border border-white/20 hover:bg-white/10'" class="px-4 py-2 rounded-lg transition-colors">1.2</button>
                            <button @click="ver = '1.1'" :class="ver === '1.1' ? 'bg-brand-primary text-white' : 'bg-transparent border border-white/20 hover:bg-white/10'" class="px-4 py-2 rounded-lg transition-colors">1.1</button>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2 text-brand-primary">PLATFORM</label>
                        <div class="flex flex-wrap gap-2">
                            <button @click="platform = 'all'" :class="platform === 'all' ? 'bg-brand-accent text-white' : 'bg-transparent border border-white/20 hover:bg-white/10'" class="px-4 py-2 rounded-lg transition-colors">All</button>
                            <button @click="platform = 'linux'" :class="platform === 'linux' ? 'bg-brand-accent text-white' : 'bg-transparent border border-white/20 hover:bg-white/10'" class="px-4 py-2 rounded-lg transition-colors"><i class="fab fa-linux"></i></button>
                            <button @click="platform = 'macos'" :class="platform === 'macos' ? 'bg-brand-accent text-white' : 'bg-transparent border border-white/20 hover:bg-white/10'" class="px-4 py-2 rounded-lg transition-colors"><i class="fab fa-apple"></i></button>
                            <button @click="platform = 'windows'" :class="platform === 'windows' ? 'bg-brand-accent text-white' : 'bg-transparent border border-white/20 hover:bg-white/10'" class="px-4 py-2 rounded-lg transition-colors"><i class="fab fa-windows"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Download Cards Grid -->
            <!-- V2.0 -->
            <div x-show="ver === '2.0'" x-transition x-cloak class="grid md:grid-cols-3 gap-6">
                <div class="bg-white/5 border border-white/10 rounded-xl p-6" x-show="platform === 'all' || platform === 'linux'">
                    <h4 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="fab fa-linux text-brand-primary"></i> Linux</h4>
                    <div class="space-y-4">
                        <div>
                            <span class="text-xs text-gray-500 uppercase font-bold">x86_64</span>
                            <div class="flex gap-2 mt-1">
                                <a href="#" class="text-sm bg-brand-primary/20 hover:bg-brand-primary px-3 py-1 rounded transition-colors">Deb</a>
                                <a href="#" class="text-sm bg-brand-primary/20 hover:bg-brand-primary px-3 py-1 rounded transition-colors">Flatpak</a>
                                <a href="#" class="text-sm bg-brand-primary/20 hover:bg-brand-primary px-3 py-1 rounded transition-colors">Snap</a>
                            </div>
                        </div>
                        <div>
                            <span class="text-xs text-gray-500 uppercase font-bold">ARM64</span>
                            <div class="flex gap-2 mt-1">
                                <a href="#" class="text-sm bg-brand-primary/20 hover:bg-brand-primary px-3 py-1 rounded transition-colors">Deb</a>
                                <a href="#" class="text-sm bg-brand-primary/20 hover:bg-brand-primary px-3 py-1 rounded transition-colors">Flatpak</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white/5 border border-white/10 rounded-xl p-6" x-show="platform === 'all' || platform === 'macos'">
                    <h4 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="fab fa-apple text-white"></i> macOS</h4>
                    <div class="space-y-4">
                        <div>
                            <span class="text-xs text-gray-500 uppercase font-bold">Apple Silicon</span>
                            <div class="mt-1"><a href="#" class="text-sm bg-white/20 hover:bg-white/40 px-3 py-1 rounded transition-colors">DMG</a></div>
                        </div>
                        <div>
                            <span class="text-xs text-gray-500 uppercase font-bold">Intel</span>
                            <div class="mt-1"><a href="#" class="text-sm bg-white/20 hover:bg-white/40 px-3 py-1 rounded transition-colors">DMG</a></div>
                        </div>
                    </div>
                </div>

                <div class="bg-white/5 border border-white/10 rounded-xl p-6" x-show="platform === 'all' || platform === 'windows'">
                    <h4 class="text-xl font-bold mb-4 flex items-center gap-2"><i class="fab fa-windows text-brand-accent"></i> Windows</h4>
                    <div class="space-y-4">
                        <div>
                            <span class="text-xs text-gray-500 uppercase font-bold">x86_64</span>
                            <div class="mt-1"><a href="#" class="text-sm bg-brand-accent/20 hover:bg-brand-accent hover:text-white px-3 py-1 rounded transition-colors">Installer</a></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- V1.2 (Abbreviated for brevity, logic applies same) -->
            <div x-show="ver === '1.2'" x-transition x-cloak class="grid md:grid-cols-3 gap-6">
                 <div class="col-span-3 text-center p-8 bg-white/5 rounded-xl">
                    <p class="text-xl">QPrompt 1.2 Downloads... (Same structure as 2.0)</p>
                    <div class="mt-4 grid md:grid-cols-3 gap-4 text-left">
                        <div class="p-4 border border-white/10 rounded">Linux AppImage</div>
                        <div class="p-4 border border-white/10 rounded">macOS Intel</div>
                        <div class="p-4 border border-white/10 rounded">Windows Installer</div>
                    </div>
                 </div>
            </div>
             <!-- V1.1 -->
             <div x-show="ver === '1.1'" x-transition x-cloak class="text-center p-12 bg-white/5 rounded-xl border border-white/10">
                <p>QPrompt 1.1 Legacy Downloads available in archive.</p>
            </div>
        </div>
    </section>

    <!-- Contribute Section -->
    <section id="contribute" class="py-24 bg-brand-primary/10">
        <div class="container mx-auto px-4">
            <h2 class="font-display text-4xl font-bold text-center mb-16">JOIN THE <span class="text-brand-primary">COMMUNITY</span></h2>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Github -->
                <a href="https://github.com/Cuperino/QPrompt-Teleprompter" class="group block p-8 bg-black/40 border border-white/10 hover:border-brand-primary transition-all rounded-2xl hover:bg-black/60">
                    <i class="fab fa-github text-5xl mb-6 text-white group-hover:scale-110 transition-transform"></i>
                    <h3 class="text-2xl font-bold mb-2">Build It</h3>
                    <p class="text-gray-400 mb-4">Get the source code and build it yourself.</p>
                    <span class="text-brand-primary font-bold group-hover:translate-x-2 transition-transform inline-block">&rarr; GitHub Repo</span>
                </a>

                <!-- Translate -->
                <a href="https://l10n.cuperino.com/projects/qprompt/" class="group block p-8 bg-black/40 border border-white/10 hover:border-brand-accent transition-all rounded-2xl hover:bg-black/60">
                    <i class="fas fa-language text-5xl mb-6 text-brand-accent group-hover:scale-110 transition-transform"></i>
                    <h3 class="text-2xl font-bold mb-2">Translate It</h3>
                    <p class="text-gray-400 mb-4">Help us support over 182 languages.</p>
                    <span class="text-brand-accent font-bold group-hover:translate-x-2 transition-transform inline-block">&rarr; Contribute</span>
                </a>

                <!-- Patreon -->
                <a href="https://www.patreon.com/qpromptapp" class="group block p-8 bg-black/40 border border-white/10 hover:border-red-500 transition-all rounded-2xl hover:bg-black/60">
                    <i class="fab fa-patreon text-5xl mb-6 text-red-500 group-hover:scale-110 transition-transform"></i>
                    <h3 class="text-2xl font-bold mb-2">Support It</h3>
                    <p class="text-gray-400 mb-4">Get early access and voting rights.</p>
                    <span class="text-red-500 font-bold group-hover:translate-x-2 transition-transform inline-block">&rarr; Become a Patron</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Assistance Section -->
    <section id="assistance" class="bg-brand-dark/50 p-0 m-0">
        <div class="container mx-auto px-0 pb-[50px] text-center">
            <h2 class="font-display text-4xl font-bold mb-8 uppercase">Need assistance?</h2>
            <p class="text-gray-400 max-w-2xl mx-auto mb-12">Join our chats, where the project manager resides and community members share resources and tips.</p>
            <div class="flex flex-wrap justify-center gap-6">
                <a href="https://forum.cuperino.com/c/qprompt/5" class="btn btn-info btn-lg px-8 font-bold text-white">JOIN Forum</a>
                <a href="https://discord.gg/8TSCZH2WyK" class="btn btn-info btn-lg px-8 font-bold text-white">JOIN Discord</a>
                <a href="https://t.me/imaginaryteleprompter" class="btn btn-info btn-lg px-8 font-bold text-white">JOIN Telegram</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black py-12 border-t border-white/10">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                <div class="text-gray-500 text-sm">
                    &copy; 2026 Javier O. Cordero PÃ©rez
                </div>
                
                <div class="flex gap-6">
                    <a href="https://x.com/qpromptapp" class="text-gray-400 hover:text-white text-xl transition-colors"><i class="fab fa-twitter"></i></a>
                    <a href="https://github.com/Cuperino/QPrompt-Teleprompter/" class="text-gray-400 hover:text-white text-xl transition-colors"><i class="fab fa-github"></i></a>
                    <a href="https://discord.gg/8TSCZH2WyK" class="text-gray-400 hover:text-white text-xl transition-colors"><i class="fab fa-discord"></i></a>
                    <a href="https://t.me/imaginaryteleprompter" class="text-gray-400 hover:text-white text-xl transition-colors"><i class="fab fa-telegram"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <!-- Essential Logic -->
    <script type="text/javascript">
    // Global so we can check if it's already running
    let qtInstance = null;

    // Alpine component for the hero prompter
    document.addEventListener('alpine:init', () => {
      Alpine.data('heroPrompter', (initialParams = {}) => ({
        // The coordinates of the prompter within the original 4224x2376 video
        baseX: 1282, 
        baseY: 500,
        scale: initialParams.scale || 0.46,
        fudgeX: initialParams.fudgeX || 0,
        fudgeY: initialParams.fudgeY || 0,

        // WASM preview controls
        wasmScale: initialParams.wasmScale || 1,
        wasmX: initialParams.wasmX || 0,
        wasmY: initialParams.wasmY || 0,
        
        get wrapperStyle() {
          // Calculate offsets based on scale so the prompter stays centered when zooming
          const left = -(this.baseX * this.scale) + this.fudgeX;
          const top = -(this.baseY * this.scale) + this.fudgeY;
          return {
            position: 'absolute',
            top: `${top}px`,
            left: `${left}px`,
            transform: `scale(${this.scale})`,
            transformOrigin: 'top left',
            maxWidth: 'none'
          };
        },

        get wasmStyle() {
          return {
            transform: `translate(${this.wasmX}px, ${this.wasmY}px) scale(${this.wasmScale})`,
            transition: 'opacity 1.5s ease-in-out, transform 0.3s ease-out'
          };
        }
      }));
    });

    async function init()
    {
      const screen = document.querySelector('#screen');
      const status = document.querySelector('#qtstatus');
      const video = document.querySelector('#top-video');
      const wasmImage = document.querySelector('#qprompt-wasm-image');
      const lastFrame= document.querySelector('#last-frame');
      
      window.mobile = function() {
        let check = false;
        (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
        return check;
      };

      if (window.mobile()) {
        lastFrame.classList.remove("hidden");
        video.style.display = "none";
      }
      else if (navigator.userAgent.search("Firefox") !== -1) {
        video.style.opacity = 1;
        // lastFrame.classList.remove("hidden"); // Removed to hide initially
        if (wasmImage) wasmImage.style.opacity = 0;
      }
      else {
        video.addEventListener("canplay", () => {
          if (!window.mobile()) {
            video.style.opacity = 1;
            // lastFrame.classList.remove("hidden"); // Removed to hide initially
            // Keep WASM preview visible during video play
            wasmImage?.classList.add("opacity-0");
          }
        })
      }
    
      // Start Loading WASM immediately but keep it hidden
      loadWasm(screen, status);

      video.addEventListener("ended", () => {
        // Fade out video 
        video.style.opacity = 0;

        // When video ends, show the last frame and WASM preview
        setTimeout(() => {
          lastFrame.classList.remove("hidden");
          wasmImage?.classList.remove("opacity-0");
          wasmImage?.classList.add("opacity-100");
          
          setTimeout(() => {
            const appContainer = document.querySelector('#qt-shadow-container');
            if (appContainer) {
              appContainer.classList.add("show-app");
            }
          }, 100);
        }, 500); // Small delay to let the video fade out a bit first
      });
    }

    async function loadWasm(screen, status) {
      if (qtInstance) return;
      try {
        qtInstance = await qtLoad({
          qt: {
            onLoaded: () => {
              console.log("WASM Loaded");
            },
            onExit: exitData => {
              status.innerHTML = 'QPrompt demo couldn\'t load' + (exitData.code !== undefined ? ` with code ${exitData.code}` : '');
            },
            entryFunction: window.qprompt_entry,
            containerElements: [screen],
          }
        });
      } catch (e) {
        console.error(e);
      }
    }
    </script>
    
    <!-- Animations Script using Motion One -->
    <script type="module">
        const { animate, scroll, inView } = window.Motion;
        
        // Hero Text Entrance
        animate("#hero-text", { opacity: [0, 1], transform: ["translateX(-50px)", "none"] }, { duration: 1 });
        animate("#hero-visual", { opacity: [0, 1], transform: ["translateX(50px)", "none"] }, { duration: 1, delay: 0.2 });
        
        // Scroll Animations
        document.querySelectorAll(".feature-card").forEach((card, index) => {
            inView(card, ({ target }) => {
                animate(target, { opacity: [0, 1], transform: ["translateY(20px)", "none"] }, { duration: 0.5, delay: index * 0.1 });
            });
        });
    </script>

    <!-- Dependencies -->
    <script src="js/fontawesome.min.js"></script>
    <!-- Popper not strictly needed if bootstrap removed, but keeping safe -->
    <script src="js/popper.min.js"></script> 
    <!-- Bootstrap removed (styles replaced by Tailwind, functionality by Alpine) -->
    <!-- <script src="js/bootstrap.min.js"></script> -->
    
    <script src="js/qprompt.js"></script>
    <script type="text/javascript" src="js/qtloader.js"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</body>
</html>
