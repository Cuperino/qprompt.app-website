// Bootstrap Variable Overrides
$primary: #23bb84;
$info: #3a9cd2;
$dark: #1c1b1f;
$body-bg: #1c1b1f;
$body-color: #ffffff;

// Make buttons fully rounded
$btn-border-radius: 50rem;
$btn-border-radius-sm: 50rem;
$btn-border-radius-lg: 50rem;

// Import Bootstrap
@import "bootstrap/scss/bootstrap";

// Tailwind imports
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .btn-beast {
    @apply px-8 py-4 text-xl font-bold uppercase tracking-wider transition-all duration-300 transform hover:scale-105 hover:shadow-[0_0_20px_rgba(35,187,132,0.5),0_0_40px_rgba(58,156,210,0.3)] active:scale-95 border-2 rounded-full;
  }
}

// Custom Font
@font-face {
  font-family: 'Dyuthi';
  src: url('/fonts/Dyuthi.woff2') format('woff2'),
       url('/fonts/Dyuthi.woff') format('woff'),
       url('/fonts/Dyuthi.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

// Global Button Enhancements
.btn {
  border-width: 2px !important;
  transition: all 0.3s ease;
  
  // Specific lighter border for primary buttons
  &.btn-primary {
    border-color: lighten($primary, 10%) !important;
  }
  
  &.btn-info {
    border-color: lighten($info, 10%) !important;
  }

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 10px;
}
::-webkit-scrollbar-track {
    background: #1c1b1f;
}
::-webkit-scrollbar-thumb {
    background: #23bb84;
    border-radius: 5px;
}

/* Preserve essential prompter styles */
#screen, #qtspinner {
    min-width: 351px;
    min-height: 351px;
    max-width: 1016px;
    max-height: 583px;
    width: 100vw;
    height: calc(100vh - 130px);
}

/* ===== TV TURN-ON EFFECT ===== */
/* 
 * This creates a CRT TV turn-on effect:
 * Phase 1: Horizontal scanline appears (bright glow)
 * Phase 2: Vertical expansion from center reveals the WASM app
 * Phase 3: Glow fades as full image is revealed
 */

/* Container for the TV effect - clips the content during animation */
#prompter-tv-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    border-radius: 0.5rem;
    margin: 0 !important;
    padding: 0 !important;
    /* Start completely hidden */
    opacity: 0;
    pointer-events: none;
    
    /* Ensure it scales from top-left to match the background prompter */
    transform-origin: top left !important;
}

/* The reveal mask - clips content vertically from center */
#prompter-tv-wrapper .tv-reveal-mask {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    margin: 0 !important;
    padding: 0 !important;
    /* Removed border-radius here to avoid double-clipping offsets */
    
    /* Start as thin horizontal line at center */
    clip-path: inset(50% 0 50% 0);
}

/* The scanline bar that appears first */
#prompter-tv-wrapper .tv-scanline {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 4px;
    transform: translateY(-50%);
    background: linear-gradient(90deg,
        transparent 0%,
        rgba(35, 187, 132, 0.4) 10%,
        rgba(58, 156, 210, 0.9) 30%,
        rgba(255, 255, 255, 1) 50%,
        rgba(58, 156, 210, 0.9) 70%,
        rgba(35, 187, 132, 0.4) 90%,
        transparent 100%
    );
    opacity: 0;
    z-index: 100;
    box-shadow: 
        0 0 10px 2px rgba(255, 255, 255, 0.8),
        0 0 30px 8px rgba(35, 187, 132, 0.6),
        0 0 60px 15px rgba(58, 156, 210, 0.4);
    pointer-events: none;
}

/* CRT glow overlay that expands with the reveal */
#prompter-tv-wrapper .tv-glow {
    position: absolute;
    inset: 0;
    border-radius: 0.5rem;
    opacity: 0;
    z-index: 50;
    pointer-events: none;
    background: radial-gradient(
        ellipse 100% 0% at 50% 50%,
        rgba(35, 187, 132, 0.3) 0%,
        rgba(58, 156, 210, 0.2) 40%,
        transparent 70%
    );
}

/* ===== ANIMATION STATES ===== */

/* Phase 1: Scanline appears (tv-on class added) */
#prompter-tv-wrapper.tv-on {
    opacity: 1;
    pointer-events: auto;
}

#prompter-tv-wrapper.tv-on .tv-scanline {
    animation: scanline-appear 0.4s ease-out forwards;
}

@keyframes scanline-appear {
    0% {
        opacity: 0;
        transform: translateY(-50%) scaleX(0);
    }
    50% {
        opacity: 1;
        transform: translateY(-50%) scaleX(0.6);
    }
    100% {
        opacity: 1;
        transform: translateY(-50%) scaleX(1);
    }
}

/* Phase 2: Vertical reveal (tv-reveal class added after scanline) */
#prompter-tv-wrapper.tv-reveal .tv-reveal-mask {
    animation: vertical-reveal 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

#prompter-tv-wrapper.tv-reveal .tv-scanline {
    animation: scanline-fade 0.8s ease-out 0.2s forwards;
}

#prompter-tv-wrapper.tv-reveal .tv-glow {
    animation: glow-expand 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* Vertical reveal - expands from center line to full height */
@keyframes vertical-reveal {
    0% {
        clip-path: inset(50% 0 50% 0);
        filter: brightness(2.5) saturate(0);
    }
    100% {
        clip-path: inset(0% 0 0% 0);
        filter: brightness(1) saturate(1);
    }
}

/* Scanline fades as reveal completes */
@keyframes scanline-fade {
    0% {
        opacity: 1;
        height: 4px;
        box-shadow: 
            0 0 10px 2px rgba(255, 255, 255, 0.8),
            0 0 30px 8px rgba(35, 187, 132, 0.6),
            0 0 60px 15px rgba(58, 156, 210, 0.4);
    }
    30% {
        opacity: 0.8;
        height: 8px;
    }
    100% {
        opacity: 0;
        height: 0px;
        box-shadow: none;
    }
}

/* Glow expands vertically with the reveal */
@keyframes glow-expand {
    0% {
        opacity: 1;
        background: radial-gradient(
            ellipse 100% 5% at 50% 50%,
            rgba(255, 255, 255, 0.4) 0%,
            rgba(35, 187, 132, 0.3) 30%,
            transparent 60%
        );
    }
    30% {
        opacity: 0.8;
        background: radial-gradient(
            ellipse 100% 30% at 50% 50%,
            rgba(35, 187, 132, 0.2) 0%,
            rgba(58, 156, 210, 0.15) 50%,
            transparent 80%
        );
    }
    60% {
        opacity: 0.5;
        background: radial-gradient(
            ellipse 100% 60% at 50% 50%,
            rgba(35, 187, 132, 0.1) 0%,
            transparent 70%
        );
    }
    100% {
        opacity: 0;
        background: transparent;
    }
}

/* Final state - clean revealed app */
#prompter-tv-wrapper.tv-complete .tv-reveal-mask {
    clip-path: inset(0% 0 0% 0);
    filter: none;
}

#prompter-tv-wrapper.tv-complete .tv-scanline,
#prompter-tv-wrapper.tv-complete .tv-glow {
    opacity: 0;
    pointer-events: none;
}

/* WASM preview image shown first */
#qprompt-wasm-image {
    position: absolute !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100% !important;
    object-fit: fill !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Target the Qt WASM shadow container specifically to ensure it fills its parent */
#qt-shadow-container,
[id*="qt-shadow-container"] { 
    opacity: 0.85 !important;
    visibility: visible !important;
    pointer-events: auto !important;
    border-radius: 0.5rem;
    overflow: hidden;
    /* Slight CRT screen curve effect */
    box-shadow: 
        inset 0 0 30px rgba(0, 0, 0, 0.3),
        0 0 20px rgba(35, 187, 132, 0.15),
        0 0 40px rgba(58, 156, 210, 0.1);
    
    /* Force it to fill the #screen dimensions exactly */
    position: absolute !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    display: block !important;
}

/* Target the Qt WASM canvas specifically */
#qt-window-canvas {
    transform-origin: top left !important;
    position: absolute !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100% !important;
    min-width: 100% !important;
    min-height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    display: block !important;
    outline: none !important;
}

/* Before WASM is loaded, hide it */
#prompter-tv-wrapper:not(.tv-on) #qt-shadow-container,
#prompter-tv-wrapper:not(.tv-on) [id*="qt-shadow-container"] {
    opacity: 0 !important;
    visibility: hidden !important;
}

/* Hide old tabs initially */
[x-cloak] { display: none !important; }

/* Parallax Background */
.parallax-bg {
    background-position: center;
    background-repeat: no-repeat;
    background-size: 130% auto; /* Larger size to allow for stronger parallax movement without showing edges */
}

.no-js .parallax-bg {
    background-attachment: scroll;
}

/* Fonts for Logo and Branding */
.font-dyuthi {
    font-family: 'Dyuthi', serif !important;
    letter-spacing: 0.05em; /* Increased spacing further to prevent clumping */
    line-height: 1.4 !important; /* Ensure readable line height for this decorative font */
}

/* Button beast mode override for 2px border */
.btn-beast {
    border-width: 2px !important;
}


